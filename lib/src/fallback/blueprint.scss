@import './../_config';

@mixin grid-fallback {
  [#{$prefix}~='grid'] {
    display: block !important;
  }

  [#{$prefix}~='grid'] {
    width: 100% !important;
    display: block !important;
  }

  [#{$prefix}*='grid'] > * {
    display: block !important;
    float: left !important;
    margin: 0 #{$gutter / 2} #{$gutter / 2} 0;

    &:last-child {
      margin-right: 0;
    }
  }

  @for $i from 1 through $cols {
    [#{$prefix}='grid'] [#{$prefix}~='#{$i}'], [#{$prefix}~='grid'][#{$prefix}~='#{$i}'] > * {
      width: calc(#{percentage($i / $cols)} - #{$gutter / 2}) !important;
    }
  }

  @for $i from 1 through $cols {
    [#{$prefix}='grid'] [#{$prefix}*='#{$i}\@'], [#{$prefix}~='grid'][#{$prefix}*='#{$i}\@'] > * {
      width: calc(#{percentage($i / $cols)} - #{$gutter / 2}) !important;
    }
  }

  @media(min-width: $sm-break) {
    [#{$prefix}~='show\@sm'] {
      display: initial !important;
    }
  }
  
  @media(min-width: $md-break) {
    [#{$prefix}~='show\@md'] {
      display: initial !important;
    }
  }
  
  @media(min-width: $lg-break) {
    [#{$prefix}~='show\@lg'] {
      display: initial !important;
    }
  }
}

// ie11
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  @include grid-fallback();

  @media (min-width: $sm-break) {
    [#{$prefix}~='show\@sm'] {
      display: block !important;
    }
  }
  
  @media (min-width: $md-break) {
    [#{$prefix}~='show\@md'] {
      display: block !important;
    }
  }
  
  @media (min-width: $lg-break) {
    [#{$prefix}~='show\@lg'] {
      display: block !important;
    }
  }
  
  @media (min-width: $xl-break) {
    [#{$prefix}~='show\@xl'] {
      display: block !important;
    }
  }
}

@supports not (display: grid) {
  @include grid-fallback();
}
